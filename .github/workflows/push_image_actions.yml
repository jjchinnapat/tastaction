name: Go

on:
  push:
    branches: [ main]
  pull_request:
    branches: [ main ]

jobs:
  push_core_image:
    runs-on: self-hosted
    steps:
    - uses: actions/checkout@v2
    - run: |
        docker build -t ghcr.io/jjchinnapat/imageflutterweb:latest --build-arg GIT_PAT=${{ secrets.GIT_PAT }} .
        echo ${{ secrets.GIT_PAT }} | docker login ghcr.io -u jjchinnapat --password-stdin
        docker push ghcr.io/jjchinnapat/imageflutterweb:latest